/*
 *  Sick Holder v1.0
 *
 *  Joel Griffith
 *  mrskitch@gmail.com
 *  @mrskitch
 */window.sickholder=function(){"use strict";var e,t,n,r,i=[],s={init:function(s){s=s||{};t=s.className||"sick-holder-placeholder";n=s.containerClassName||"sick-holder-container";r=s.fontSize||"";e={top:s.nudgeTop||0,left:s.nudgeLeft||0};this.getPlaceholderElements("input").getPlaceholderElements("textarea").createSickholder(i)},getPlaceholderElements:function(e){var t=document.getElementsByTagName(e);for(var n=0;n<t.length;n++)t[n].getAttribute("placeholder")&&i.push(t[n]);return this},createSickholder:function(i){for(var s=0;s<i.length;s++){var o=i[s],u=document.createElement("label"),a=document.createElement("aside"),f=this.getMargins(o,"margin-left"),l=this.getMargins(o,"margin-top");a.className=n;u.setAttribute("for",o.getAttribute("id"));u.setAttribute("data-placeholder","sick-holder");u.className=t;u.innerHTML=o.getAttribute("placeholder");u.style.cssText+="top:"+(e.top+l)+"px;"+"left:"+(e.left+f)+"px;"+"max-width:"+(o.offsetWidth-e.left)+"px;"+"font-size:"+r+";";this.insertInto(o,a).insertAfter(o,u);this.focusHandler(o).blurHandler(o).inputHandlers(o)}},focusHandler:function(e){this.addEvent(e,"focus",function(){this.nextSibling.className=t+" focus"});return this},blurHandler:function(e){this.addEvent(e,"blur",function(){this.nextSibling.className=t});return this},inputHandlers:function(e){var t="cut,paste,input,keydown".split(",");this.addEvent(e,t,function(){setTimeout(function(){e.value===""?e.nextSibling.style.display="block":e.nextSibling.style.display="none"},1)});return this},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling);return this},insertInto:function(e,t){this.insertAfter(e,t);t.appendChild(e);return this},getMargins:function(e,t){var n;e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t));return parseInt(n,10)},addEvent:function(e,t,n){var r=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent){e["e"+t+n]=n;e[t+n]=function(){e["e"+t+n](window.event)};e.attachEvent("on"+t,e[t+n])}else e["on"+t]=e["e"+t+n]};if(t instanceof Array)for(var i=0;i<t.length;i++)r(e,t[i],n);else r(e,t,n);return this}};return s}();